<!DOCTYPE html>
<html>

<head>
	<title></title>

	<script src="./js/vue.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="stylesheet" type="text/css" href="data_request_styling.css" />
	<script src="./js/vue.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="stylesheet" type="text/css" href="data_request_styling.css" />
	<script src="app.js"></script>
	<script src="components/request_detail.js"></script>
	<script src="components/contract.js"></script>

</head>

<body>

	<div id="app">
		<div id="fases">
			<div v-for="fase in fases">
				<p>{{ fase.name }}</p>
				<div v-for="request in fase.requests">
									<div id ="deadline">{{request.date}}</div>
					<div v-on:click="showPopUpRequestDetail(request.id)" id="card">
						<div id="nameholder">
							<div id="circleID">{{ getUserInitials(request.user) }}</div>
							<div id="information">
								<h3> {{ getUserName(request.user) }}</h3>
								<h5>{{ getUsersTeam(request.user) }}</h5>
							</div>
						</div>
						<h2>{{request.title}}</h2>
						<p>{{request.reason}}</p>
						<p>{{request.forWhat}}</p>
						<strong>Gewenste bestandstypes</strong>
						<div id="filetype">{{request.selectedFiletype}}</div>
						<div id="stap">Huidige stap</div>
						<div id="afwachting">Wachten op antwoord
							<div id="actieVan">Vereist actie van Datastreams</div>

						</div>
						<div id="quickreminder">Herinnering sturen</div>
						<div id="quickcancel">Aanvraag annuleren</div>
					</div>
				</div>

				<template v-if="fase.name === 'definitiefase'">

					<!-- 	Actie bij mij kaarten -->
					<div id="card">
						<div id="nameholder">
							<div id="circleID">NB</div>
							<div id="information">
								<h3>Noor Broens</h3>
								<h5>Datastreams</h5>
							</div>
						</div>
						<h2>Back-end landingspage</h2>
						<p>De code van de landingspage zal worden gebruikt voor de testen uit te voeren voor de snelheid en veiligheid.</p>
						<div id="stap3">Huidige stap</div>
						<div id="afwachting3">Wachten op antwoord
							<div id="actieVan3">Actie bij jou</div>
						</div>
						<div id="quickreminder">Data aanleveren</div>
						<div id="quickcancel">Contract wijzigen</div>
					</div>
					<!-- actie compleet bestand downloaden kaart -->
					<div id="completedTransfer">
						<h2 style="color: #4E4E4E">Dummy Data</h2>
						<div id="stap" style="color: #B8E2C4">16-06-2020</div>
						<div id="afwachting2"><a href="https://www.datastreams.io/wp-content/uploads/2019/03/Datastreams_logo_standard.png">afbeelding.jpg</a>
							<div id="actieVan2">Download bestand</div>
						</div>
					</div>
				</template>
				<div id="stap2">Nieuw stap</div>
				<button id="aanvraagbtn" v-on:click="openPopup(fase.name)"> <span style="border-style: solid; padding:15px; border-radius: 10px;">DATA AANVRAAG TOEVOEGEN</span></button>
			</div>
		</div>

		<div v-if="openRequestDetail == true" class="requestdetail_container">
			<div class="popupbox requestdetail" v-bind:request="getCurrentRequest()" is="request_detail"></div>
			<div
		    v-if="showContract"
			v-bind:contract="getCurrentContract()"
		    is="contract"
			class="popupbox">
		    </div>
		</div>

		<div id="popup" v-if="showPopupForFase">
			<div class="modal" id="modalRequest">
				<button class="close-button" id="close-button"><i class="far fa-times-circle"></i></button>

				<div class="modalHeader">
					<div class="userTag">GC</div>
					<div class="modalTitling">
						<h2 style="margin-top:5px;">Data aanvraag</h2>
						<p style="margin-top:5px;">Datastreams project</p>
					</div>
				</div>

				<div class="modal-guts">
					<label for="data_request_naam">Titel van aanvraag</label>
					<textarea id="data_request_naam" name="data_request_naam" rows="1" placeholder="Welke data vraag je aan?" class="modalTextarea" v-model="popupData.title"></textarea>

					<label for="data_request_reden">Reden van aanvraag</label>
      				<textarea id="data_request_reden" name="data_request_naam" rows="3" placeholder="Waarvoor wordt de data gebruikt?" class="modalTextarea" v-model="popupData.reason"></textarea>

      				<label for="data_request_reden">Waar wordt de data voor gebruikt</label>
					<textarea id="data_request_reden" name="data_request_naam" rows="3" placeholder="Waarvoor wordt de data gebruikt?" class="modalTextarea" v-model="popupData.forWhat"></textarea>

					<label for="filetypes" style="display: block;">Gewenste bestandstypes <span style="color:#989898"> optioneel</span></label>

					<button v-for="filetype in filetypes" id="filetypes" class="filetypeInput" v-bind:class="{ selected: filetype === popupData.selectedFiletype }" v-on:click="popupData.selectedFiletype = filetype">{{filetype}}</button>

					<label for="date" style="display: block;">Deadline voor levering <span style="color:#989898"> </span></label>
					<input style="width:160px;" class="modalTextarea" name="date" placeholder="DD/MM/YYYY" type="date" autocomplete="off" v-model="popupData.date" />

					<button class="programmer-blue-btn" style="margin:24px auto 8px auto;" v-on:click="addRequest">Verstuur aanvraag</button>
				</div>
			</div>
	</div>
</div>

</body>

</html>
